# LensClip

**æ•£æ­©ãŒã€å†’é™ºã«ãªã‚‹ã€‚**

ã€Œã“ã‚Œãªãã«ï¼Ÿã€
ãã®ä¸€è¨€ã‹ã‚‰ã€ä¼šè©±ãŒå§‹ã¾ã‚‹ã€‚

å†™çœŸã‚’1æšæ’®ã‚‹ã ã‘ã§ã€å­ã©ã‚‚ã«ã‚ã‹ã‚‹è¨€è‘‰ã§æ•™ãˆã¦ãã‚Œã‚‹ã€‚
è¦ªå­ã§ä½¿ã†ã€ãƒ‡ã‚¸ã‚¿ãƒ«å›³é‘‘ã‚¢ãƒ—ãƒªã€‚

**ãƒ‡ãƒ¢**: https://lensclip.up.railway.app/

---

## ã“ã‚“ãªç¬é–“ã®ãŸã‚ã«

å…¬åœ’ã§è¦‹ã¤ã‘ãŸè™«ã€æ•£æ­©ä¸­ã«æ°—ã«ãªã£ãŸè‰èŠ±ã€ç©ºã‚’é£›ã¶é³¥ã®åå‰â€”â€”

ã€Œãªã‚“ã§ï¼Ÿã€ã€Œã“ã‚Œãªã«ï¼Ÿã€ã¨èã‹ã‚ŒãŸã¨ãã€
ã¡ã‚ƒã‚“ã¨ç­”ãˆã¦ã‚ã’ã‚‰ã‚Œã‚‹ã€‚ãã®ç¬é–“ã‚’ã€ã‚¢ãƒ—ãƒªãŒä¸€ç·’ã«ä½œã‚Šã¾ã™ã€‚

ä½•æ°—ãªã„æ•£æ­©ãŒã€å¿˜ã‚Œã‚‰ã‚Œãªã„æ€ã„å‡ºã«å¤‰ã‚ã‚‹ã€‚

---

## å­ã©ã‚‚ã«ã¯ã€è‡ªåˆ†ã ã‘ã®å›³é‘‘ãŒã§ãã‚‹

æ’®ã£ãŸç™ºè¦‹ã¯ã€ã™ã¹ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«æ®‹ã‚Šã¾ã™ã€‚
æ—¥ä»˜ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¿ã‚°ã§æ•´ç†ã•ã‚Œã¦ã„ãã‹ã‚‰ã€
ä½¿ã†ãŸã³ã«**ä¸–ç•Œã«ã²ã¨ã¤ã ã‘ã®å›³é‘‘**ãŒè‚²ã£ã¦ã„ãã€‚

---

## ä½¿ã„æ–¹ã¯ã€å†™çœŸã‚’æ’®ã‚‹ã ã‘

```
ğŸ“· æ°—ã«ãªã‚‹ã‚‚ã®ã‚’æ’®ã‚‹
        â†“
ğŸ“– å­ã©ã‚‚ã«ã‚ã‹ã‚‹è¨€è‘‰ã§èª¬æ˜ãŒå±Šã
        â†“
ğŸ“š ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¿å­˜ã•ã‚Œã¦ã€å›³é‘‘ãŒè‚²ã¤
```

èª¬æ˜ã¯ã€Œèª­ã¿èã‹ã›ã§ãã‚‹ã€æ–‡ä½“ã§å±Šãã¾ã™ã€‚
ç”»é¢ã‚’è¦‹ã›ãªãŒã‚‰ã€ä¸€ç·’ã«èª­ã‚“ã§ã‚ã’ã¦ãã ã•ã„ã€‚

---

## ã§ãã‚‹ã“ã¨

- **ãã®å ´ã§èª¿ã¹ã‚‹** â”€â”€ ã‚«ãƒ¡ãƒ©ã§ãƒ‘ã‚·ãƒ£ã£ã¨æ’®ã‚‹ã ã‘
- **è¤‡æ•°ã®å€™è£œãŒå‡ºã‚‹** â”€â”€ ã€Œã“ã‚Œã‹ã‚‚ã€ã‚’å­ã©ã‚‚ã¨ä¸€ç·’ã«é¸ã¹ã‚‹
- **å›³é‘‘ã¨ã—ã¦æ®‹ã‚‹** â”€â”€ æ—¥ä»˜ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ»åœ°å›³ã§æŒ¯ã‚Šè¿”ã‚Œã‚‹
- **ã‚¿ã‚°ã‚’ã¤ã‘ã‚‰ã‚Œã‚‹** â”€â”€ ã€Œã“ã†ãˆã‚“ã€ã€ŒãŠãã«ã„ã‚Šã€ãªã©è‡ªç”±ã«æ•´ç†
- **èª¿ã¹ãªãŠã›ã‚‹** â”€â”€ ã‚‚ã†ä¸€å›ç¢ºèªã—ãŸã„ã¨ãã¯ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—

---

---

## For Developers

ã“ã“ã‹ã‚‰ã¯å®Ÿè£…ã®è©±ã§ã™ã€‚

![Laravel](https://img.shields.io/badge/Laravel-12-FF2D20?style=flat&logo=laravel&logoColor=white)
![React](https://img.shields.io/badge/React-18-61DAFB?style=flat&logo=react&logoColor=black)
![TypeScript](https://img.shields.io/badge/TypeScript-5-3178C6?style=flat&logo=typescript&logoColor=white)
![Google Cloud](https://img.shields.io/badge/Google_Cloud-4285F4?style=flat&logo=googlecloud&logoColor=white)
![Railway](https://img.shields.io/badge/Railway-0B0D0E?style=flat&logo=railway&logoColor=white)

### Tech Stack

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | é¸å®šç†ç”± |
|---------|------|---------|
| Backend | Laravel 12 + Inertia.js | å …ç‰¢ãª MVC + SPA çš„ UX ã‚’æœ€å°æ§‹æˆã§å®Ÿç¾ |
| Frontend | React + TypeScript | å‹å®‰å…¨ãª UI é–‹ç™ºã€Inertia ã«ã‚ˆã‚‹ SSR å¯¾å¿œ |
| ç”»åƒèªè­˜ | Cloud Vision API | Object Localization ã§ä¸»å¯¾è±¡ã‚’ bbox å–å¾— |
| èª¬æ˜ç”Ÿæˆ | Gemini API | ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ« + JSON mode ã§æ§‹é€ åŒ–å‡ºåŠ› |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | Google Cloud Storage | æœ¬ç•ªã‚¹ã‚±ãƒ¼ãƒ«å¯¾å¿œã€‚ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ 1 æœ¬ã§ Vision / Gemini / GCS ã‚’çµ±åˆ |
| Queue | Redis + Laravel Jobs | éåŒæœŸå‡¦ç†ãƒ»å†ªç­‰ãƒªãƒˆãƒ©ã‚¤è¨­è¨ˆ |
| Auth | Laravel Breeze + Socialite | ãƒ¡ãƒ¼ãƒ«èªè¨¼ + Google OAuth ã‚’æœ€å°ã‚³ã‚¹ãƒˆã§å®Ÿè£… |
| Deploy | Railway | Docker ãƒ™ãƒ¼ã‚¹ã®å³æ™‚ãƒ‡ãƒ—ãƒ­ã‚¤ã€MySQL + Redis + Volume ã‚’ä¸€å…ƒç®¡ç† |

### AI Pipeline

å†™çœŸã‹ã‚‰èª¬æ˜ã‚’ç”Ÿæˆã™ã‚‹ã¾ã§ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼ã€‚2 ã¤ã®ãƒ¢ãƒ‡ãƒ«ã‚’ç›´åˆ—ã§ä½¿ã†è¨­è¨ˆã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant App as Web Server
    participant Q as Queue Worker
    participant Vision as Cloud Vision API
    participant Gemini as Gemini API
    participant GCS as Cloud Storage

    User->>App: ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    App->>GCS: original + thumb ä¿å­˜
    App->>Q: Job ã‚’ã‚­ãƒ¥ãƒ¼æŠ•å…¥
    App-->>User: { status: processing }

    Q->>Vision: Object Localization
    Vision-->>Q: bbox åº§æ¨™ï¼ˆä¸»å¯¾è±¡ã®ä½ç½®ï¼‰
    Q->>GCS: crop ç”»åƒã‚’ä¿å­˜
    Q->>Gemini: crop ç”»åƒ + ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    Gemini-->>Q: JSONï¼ˆtitle / summary / kid_friendly ...ï¼‰
    Q-->>Q: status = ready

    User->>App: ãƒãƒ¼ãƒªãƒ³ã‚°ï¼ˆ1 ç§’é–“éš”ï¼‰
    App-->>User: { status: ready, title: "ãƒ†ãƒ³ãƒˆã‚¦ãƒ ã‚·", ... }
```

**ãªãœ 2 æ®µæ§‹ãˆã«ã™ã‚‹ã‹ï¼Ÿ**
Vision API ã§ä¸»å¯¾è±¡ã‚’ bbox ã§åˆ‡ã‚Šå‡ºã—ã¦ã‹ã‚‰ Gemini ã«æ¸¡ã™ã“ã¨ã§ã€èƒŒæ™¯ãƒã‚¤ã‚ºã‚’æ’é™¤ã—åŒå®šç²¾åº¦ã‚’å‘ä¸Šã•ã›ã¦ã„ã¾ã™ã€‚ã¾ãŸè²¬å‹™ã‚’åˆ†é›¢ã™ã‚‹ã“ã¨ã§ã€å°†æ¥ã®ãƒ¢ãƒ‡ãƒ«å·®ã—æ›¿ãˆã«ã‚‚å¯¾å¿œã—ã‚„ã™ã„è¨­è¨ˆã«ãªã£ã¦ã„ã¾ã™ã€‚

### Key Design Decisions

**1. éåŒæœŸãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ + status machine**
å‡¦ç†ã¯ 3ã€œ10 ç§’ã‹ã‹ã‚‹ãŸã‚ã€`processing â†’ ready / failed` ã® status machine ã§ãƒ•ãƒ­ãƒ³ãƒˆãŒãƒãƒ¼ãƒªãƒ³ã‚°ã€‚Job ã‚’å†ªç­‰è¨­è¨ˆï¼ˆstatus ãŒ processing ä»¥å¤–ãªã‚‰ä½•ã‚‚ã—ãªã„ï¼‰ã«ã—ã¦ãƒªãƒˆãƒ©ã‚¤ã‚’å®‰å…¨ã«ã—ã¦ã„ã¾ã™ã€‚

**2. Google Cloud ã‚’ä¸€è²«ã—ã¦æ´»ç”¨**
ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆGCSï¼‰ãƒ»ç”»åƒèªè­˜ï¼ˆVision APIï¼‰ãƒ»èª¬æ˜ç”Ÿæˆï¼ˆGemini APIï¼‰ã‚’ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ 1 æœ¬ã§çµ±åˆã€‚èªè¨¼ã®è¤‡é›‘ã•ã‚’æœ€å°åŒ–ã—ã¦ã„ã¾ã™ã€‚

**3. äºŒå±¤ UX è¨­è¨ˆ**
æ“ä½œè€…ã¯è¦ªã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å—ã‘æ‰‹ã¯å­ã©ã‚‚ã¨ã„ã†äºŒå±¤æ§‹é€ ã‚’å‰æã«è¨­è¨ˆã€‚`kid_friendly` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã€Œè¦ªãŒèª­ã¿èã‹ã›ã‚‹ã€æƒ³å®šã®æ–‡ä½“ã§ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

### Docs

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å†…å®¹ |
|------------|------|
| [PRD](docs/prd.md) | è£½å“è¦ä»¶ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ»MVP ã‚¹ã‚³ãƒ¼ãƒ— |
| [UX Flow](docs/ux-flow.md) | ç”»é¢é·ç§»ãƒ»çŠ¶æ…‹ç®¡ç† |
| [API Spec](docs/api-spec.md) | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä»•æ§˜ |
| [DB Schema](docs/db-schema.md) | ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ |
| [AI Pipeline](docs/ai-pipeline.md) | Visionâ†’Cropâ†’Gemini ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è©³ç´° |
| [AI Models](docs/ai-models.md) | Gemini ãƒ¢ãƒ‡ãƒ«è¨±å¯ãƒªã‚¹ãƒˆ |
| [Setup Guide](docs/setup.md) | ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒæ§‹ç¯‰æ‰‹é † |
| [Deployment](docs/deployment.md) | Railway ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é † |

### Quick Start

```bash
cp .env.example .env           # API ã‚­ãƒ¼ã‚’è¨­å®š
./vendor/bin/sail up -d
./vendor/bin/sail artisan migrate && ./vendor/bin/sail artisan storage:link
./vendor/bin/sail npm run dev
```

è©³ç´°ã¯ [Setup Guide](docs/setup.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## License

MIT
